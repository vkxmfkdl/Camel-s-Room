"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var table_1 = require("table");
var chalk = require("chalk");
var lodash_1 = require("lodash");
var deps_1 = require("../deps");
exports.render = function (depMap) {
    /*
     * Define the table headers
     */
    var rows = [[
            chalk.bold('Name'),
            chalk.bold('Package Version'),
            chalk.bold('Installed Version'),
            chalk.bold('Status'),
            chalk.bold('Locked')
        ]];
    /*
     * Generate the rest of the table rows with our data
     */
    rows = lodash_1.concat(rows, createRows(depMap.deps), createRows(depMap.devDeps));
    /*
     * Print the table
     */
    console.log(table_1.table(rows));
};
/**
 * @param  {IPackageDescriptor[]} pkgDescriptor
 * @returns string
 */
var createRows = function (pkgDescriptor) {
    return pkgDescriptor.map(function (pkg) { return ([
        pkg.name,
        pkg.parsedDefinedVersion,
        pkg.installedVersion,
        (!deps_1.isMatchingVersion(pkg.parsedDefinedVersion, pkg.installedVersion)
            ? chalk.bold.bgRed(' Mismatch ')
            : chalk.bold.bgGreen(' Matching ')),
        (pkg.locked
            ? chalk.bold.bgGreen('  Locked  ')
            : chalk.bold.bgRed(' Unlocked '))
    ]); });
};
